import java.util.Scanner;

public class Main {
  public static void exibirTabuleiro(int[][] tabuleiro, Navio[] navios) {

    do{
      System.out.println("Ahoy, capit√£o destemido! Bem-vindo aos mares ca√≥ticos e cheios de perigos de Sete Lagoas. Arregace as mangas, ajuste seu chap√©u de pirata e prepare-se para afundar inimigos enquanto risadas maliciosas ecoam pelas sete lagoas. A mar√© da divers√£o est√° prestes a virar a seu favor, ent√£o, suba a bordo e mostre quem √© o verdadeiro rei (ou rainha) da t√£o temida Lagoa Paulino! Arrr, que a sorte esteja ao seu lado, capit√£o intr√©pido! üè¥‚Äç‚ò†Ô∏èüåä\n \n");

      System.out.println("Voc√™ est√° pronto?");
      System.out.println("1 - Sim");
      System.out.println("2 - N√£o");
      pronto = entrada.nextInt();

        if(pronto==1){
          System.out.println("\nEnt√£o vamos come√ßar a pirataria...\n");
        }else{
          System.out.println("\nEnt√£o leia nossa introdu√ß√£o novamente para se inspirar, marinheiro!\n \n");
        }
    }while(pronto != 1);
      

      //tabuleiro:
      
    System.out.println("   A B C D E F G");
    System.out.println("  ______________");

      for (int i = 0; i < tabuleiro.length; i++) {
        System.out.printf("%d|", i + 1);

          /* Imprime os elementos do tabuleiro.

          LEGENDA:
          "~" = quer dizer que nenhum tiro foi dado naquela posi√ß√£o ainda.
          (esse s√≠mbolo est√° contido na vari√°vel -1)
          "x" = quer dizer que um tiro foi dado mas n√£o acertou nada.
          (esse s√≠mbolo est√° contido na vari√°vel 0)
          "O" = quer dizer que um tiro foi dado e acertou algum navio.
          (esse s√≠mbolo est√° contido na vari√°vel 1)

          */

        for (int j = 0; j < tabuleiro[i].length; j++) {
          boolean ocupadoPorNavio = false;

            for (Navio navio : navios) {
              int[] posicaoNavio = navio.getPosicao();
                char orientacaoNavio = navio.getOrientacao();

                  for (int k = 0; k < navio.getPosicao().length; k++) {
                    if (orientacaoNavio == 'H' && i == posicaoNavio[k] && j == k) {
                    ocupadoPorNavio = true;
                    break;
                    } else if (orientacaoNavio == 'V' && j == posicaoNavio[k] && i == k) {
                    ocupadoPorNavio = true;
                    break;
                    }
                  }
                }

                if (ocupadoPorNavio) {
                    System.out.print(" @");
                } else if (tabuleiro[i][j] == -1) {
                    System.out.print(" ~");
                } else if (tabuleiro[i][j] == 0) {
                    System.out.print(" x");
                } else if (tabuleiro[i][j] == 1) {
                    System.out.print(" O");
                }
            }

            System.out.println();
        }
    }

    public static void main(String[] args) {
      Scanner entrada = new Scanner(System.in);

      int linhaTab = 7;
      int colunaTab = 7;
      int QuantidadeBarcos = 3;
      int TamanhoDoBarco = 3;
      int[][] tabuleiro = new int[linhaTab][colunaTab];
      String coluna;
      int linha = 0;

        // Inicializa√ß√£o do tabuleiro
        for (int i = 0; i < linhaTab; i++) {
          for (int j = 0; j < colunaTab; j++) {
            tabuleiro[i][j] = -1;
          }
        }

        Navio[] navios = new Navio[QuantidadeBarcos];

        for (int i = 0; i < QuantidadeBarcos; i++) {
          navios[i] = new Navio(TamanhoDoBarco);
        }

        for (Navio navio : navios) {
          do {
            exibirTabuleiro(tabuleiro, navios);

            System.out.println("\nDigite qual coluna onde deseja colocar o navio: ");
            coluna = entrada.next().toUpperCase();

            System.out.println("\nDigite o n√∫mero da linha que deseja colocar o navio: ");
            linha = entrada.nextInt();

            System.out.println("\nDigite a orienta√ß√£o do navio (H para horizontal, V para vertical): ");
            char orientacao = entrada.next().toUpperCase().charAt(0);

            if (!(coluna.equals("A") || coluna.equals("B") || coluna.equals("C") || coluna.equals("D") || coluna.equals("E") || coluna.equals("F") || coluna.equals("G")) || linha < 1 || linha > 7) {
              System.out.println("\nJogada Inv√°lida! Jogue novamente.");
            } else {
                navio.posicionarNavio(linha - 1, coluna.charAt(0) - 'A', orientacao);
              }
            
          
          } while (!(coluna.equals("A") || coluna.equals("B") || coluna.equals("C") || coluna.equals("D") || coluna.equals("E") || coluna.equals("F") || coluna.equals("G")) || linha < 1 || linha > 7);
        }

        // Exibir o tabuleiro final ap√≥s o posicionamento de todos os navios
        exibirTabuleiro(tabuleiro, navios);
    }
}
